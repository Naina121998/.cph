#include <iostream>
#include <stack>
using namespace std;
int maxWater(int arr[],int n){
    stack <int> st;
    int res = 0;
    for(int i =0 ; i<n ;i++){
        while(!st.empty() && arr[st.top()] < arr[i]){
            int popheight = arr[st.top()];
            st.pop();


        if(st.empty()){
            break;
        }
        int dist = i - st.top() - 1;
        int height = (min(arr[st.top()],arr[i]) - popheight);
        res = res + dist* height;
    }
    st.push(i);
    }
    return res;
}
int main()
{
    int arr[] = {0, 1, 0, 2, 1, 0, 1, 3, 2, 1, 2, 1};
    int n = sizeof(arr)/sizeof(arr[0]);
     
    cout << maxWater(arr, n);
     
    return 0;
}


















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































            
        